{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Mitos/admin/src/app/login/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { GoogleOAuthProvider, GoogleLogin } from \"@react-oauth/google\";\r\nimport { API_BASE_URL } from \"@/utils/config\";\r\n\r\nexport default function LoginScreen() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\"); // Clear previous errors\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/auth/login`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        // Check if the user is an admin\r\n        if (data.role !== \"admin\") {\r\n          setError(\"Access restricted to admin users only.\");\r\n          return;\r\n        }\r\n\r\n        // Save token and role to local storage\r\n        localStorage.setItem(\"token\", data.accessToken);\r\n        localStorage.setItem(\"refreshToken\", data.refreshToken);\r\n        localStorage.setItem(\"role\", data.role);\r\n        localStorage.setItem(\"userId\", data.user.id);\r\n        // Navigate to admin dashboard\r\n        router.push(\"/admin/types\");\r\n      } else {\r\n        // Set error message from server response\r\n        setError(data.message || \"Login failed. Please try again.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Login Error:\", err); // Debugging log\r\n      setError(\"Something went wrong. Please try again.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n      <div className=\"container p-10\">\r\n        <div className=\"flex w-full\">\r\n          <div className=\"w-[40%] hidden md:flex\">\r\n            <div className=\"login\">\r\n              <div className=\"login_img\">\r\n                <img src=\"/images/login/login_img.png\" alt=\"\" />\r\n              </div>\r\n              <div className=\"flying_logo\">\r\n                <img src=\"/images/login/pop1.png\" alt=\"\" />\r\n                <img src=\"/images/login/pop2.png\" alt=\"\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"md:w-[60%] w-[100%]\">\r\n            <div className=\"login_content\">\r\n              <div className=\"logo\">\r\n                <img src=\"/images/logo/logo.png\" alt=\"\" />\r\n              </div>\r\n\r\n              <h1 className=\"font-bold text-center pt-6\">Admin Login!</h1>\r\n              <form onSubmit={handleSubmit} className=\"mt-6\">\r\n                {/* Email Input */}\r\n                <div className=\"mb-4\">\r\n                  <label htmlFor=\"email\">\r\n                    Email address<span>*</span>\r\n                  </label>\r\n                  <input\r\n                    id=\"email\"\r\n                    type=\"email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    placeholder=\"Enter email address\"\r\n                    required\r\n                  />\r\n                </div>\r\n                {/* Password Input */}\r\n                <div className=\"mb-4\">\r\n                  <label htmlFor=\"password\">\r\n                    Password<span>*</span>\r\n                  </label>\r\n                  <input\r\n                    id=\"password\"\r\n                    type=\"password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    placeholder=\"Enter password\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {/* Error Message */}\r\n                {error && <p className=\"text-red-500 text-sm mb-4\">{error}</p>}\r\n               \r\n                <button type=\"submit\" className=\"login_btn\">\r\n                  Login\r\n                </button>\r\n              </form>\r\n\r\n            \r\n            </div>\r\n            <p className=\"mt-2 text-center\" >\r\n          You don't have an account?{\" \"}\r\n          <a href=\"/register\" className=\"text-[#35095E]\">\r\n            Signin here\r\n          </a>\r\n        </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}